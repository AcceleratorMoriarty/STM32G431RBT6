## LED：

翻转某一个LED灯，其他LED不变(异或)

```c
//	翻转LED 1
led = led^0x01
```

LED闪烁0.1s

```c
//实现LED3的0.1s闪烁
if(uwTick-led_uwtick<100) return;
led_uwtick=uwTick;
if(led_state==0)
{
    led_state=1;
    led_disp(0x05);// LED3和LED1点亮 0000 0101
}
else 
{
    led_state=0;
    led_disp(0x01);// LED1点亮 0000 0001
}
```

## KEY：

按键按下常亮，松开熄灭

```c
switch(key_down)
{
    case 3:
        if(loc_flag==0)
        {
            led_disp(0x03);
        }
        break;
	}
	
	if(key_up==3)
	{
		if(loc_flag==0)
		{
			led_disp(0x01);
		}
	}
}
```

## ADC:

```c
float get_adc(void)
{
	float v;
	uint16_t adc;
	HAL_ADC_Start(&hadc2);
	adc=HAL_ADC_GetValue(&hadc2);
	v=3.3*adc/4096;
	return v;
}
```

## PWM：

```C
HAL_TIM_PWM_Start(&htim3,TIM_CHANNEL_2);

__HAL_TIM_SET_AUTORELOAD(&htim3,1.0*1000000/f);
__HAL_TIM_SET_COMPARE(&htim3,TIM_CHANNEL_2,0.1*1000000/f);
```

输入捕获

![image-20240411234307028](C:\Users\Accelerator\AppData\Roaming\Typora\typora-user-images\image-20240411234307028.png)

![image-20240411234405481](C:\Users\Accelerator\AppData\Roaming\Typora\typora-user-images\image-20240411234405481.png)

![image-20240411234423402](C:\Users\Accelerator\AppData\Roaming\Typora\typora-user-images\image-20240411234423402.png)

```c
HAL_TIM_Base_Start_IT(&htim3);
HAL_TIM_IC_Start_IT(&htim3,TIM_CHANNEL_1);
HAL_TIM_IC_Start_IT(&htim3,TIM_CHANNEL_2);

void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef *htim)
{
	if(htim->Instance==TIM3)
	{
		if(htim->Channel==HAL_TIM_ACTIVE_CHANNEL_1)
		{
			pwm1_count=HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_1)+1; 
			pwm2_count=HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_2)+1;
			duty=(float)pwm2_count/pwm1_count;
			__HAL_TIM_SetCounter(htim,0);//注意清零
		}
    }
}
```

